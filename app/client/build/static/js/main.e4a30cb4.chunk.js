(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{33:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(15),s=n.n(a),u=n(7),i=(n(33),n(3)),j=n.n(i),o=n(5),b=n(6),l=n(9),p=n(4),O="session/SET_USER",x="session/REMOVE_USER",d=function(e){return{type:O,payload:e}},h={user:null},f=function(e,t){return function(){var n=Object(o.a)(j.a.mark((function n(r){var c,a,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});case 2:if(!(c=n.sent).ok){n.next=11;break}return n.next=6,c.json();case 6:return a=n.sent,r(d(a)),n.abrupt("return",null);case 11:if(!(c.status<500)){n.next=19;break}return n.next=14,c.json();case 14:if(!(s=n.sent).errors){n.next=17;break}return n.abrupt("return",s.errors);case 17:n.next=20;break;case 19:return n.abrupt("return",["An error occurred. Please try again."]);case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(e,t,n){return function(){var r=Object(o.a)(j.a.mark((function r(c){var a,s,u;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:n})});case 2:if(!(a=r.sent).ok){r.next=11;break}return r.next=6,a.json();case 6:return s=r.sent,c(d(s)),r.abrupt("return",null);case 11:if(!(a.status<500)){r.next=19;break}return r.next=14,a.json();case 14:if(!(u=r.sent).errors){r.next=17;break}return r.abrupt("return",u.errors);case 17:r.next=20;break;case 19:return r.abrupt("return",["An error occurred. Please try again."]);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};var m=n(1),g=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(b.a)(a,2),i=s[0],l=s[1],O=Object(r.useState)(""),x=Object(b.a)(O,2),d=x[0],h=x[1],v=Object(u.c)((function(e){return e.session.user})),g=Object(u.b)(),w=function(){var e=Object(o.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g(f(i,d));case 3:(n=e.sent)&&c(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v?Object(m.jsx)(p.a,{to:"/"}):Object(m.jsxs)("form",{onSubmit:w,children:[Object(m.jsx)("div",{children:n.map((function(e,t){return Object(m.jsx)("div",{children:e},t)}))}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{name:"email",type:"text",placeholder:"Email",value:i,onChange:function(e){l(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:d,onChange:function(e){h(e.target.value)}}),Object(m.jsx)("button",{type:"submit",children:"Login"})]})]})},w=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(b.a)(a,2),i=s[0],l=s[1],O=Object(r.useState)(""),x=Object(b.a)(O,2),d=x[0],h=x[1],f=Object(r.useState)(""),g=Object(b.a)(f,2),w=g[0],y=g[1],k=Object(r.useState)(""),S=Object(b.a)(k,2),C=S[0],E=S[1],P=Object(u.c)((function(e){return e.session.user})),U=Object(u.b)(),N=function(){var e=Object(o.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w!==C){e.next=6;break}return e.next=4,U(v(i,d,w));case 4:(n=e.sent)&&c(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return P?Object(m.jsx)(p.a,{to:"/"}):Object(m.jsxs)("form",{onSubmit:N,children:[Object(m.jsx)("div",{children:n.map((function(e,t){return Object(m.jsx)("div",{children:e},t)}))}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"User Name"}),Object(m.jsx)("input",{type:"text",name:"username",onChange:function(e){l(e.target.value)},value:i})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Email"}),Object(m.jsx)("input",{type:"text",name:"email",onChange:function(e){h(e.target.value)},value:d})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",name:"password",onChange:function(e){y(e.target.value)},value:w})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Repeat Password"}),Object(m.jsx)("input",{type:"password",name:"repeat_password",onChange:function(e){E(e.target.value)},value:C,required:!0})]}),Object(m.jsx)("button",{type:"submit",children:"Sign Up"})]})},y=function(){var e=Object(u.b)(),t=function(){var t=Object(o.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(function(){var e=Object(o.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/auth/logout",{headers:{"Content-Type":"application/json"}});case 2:e.sent.ok&&t({type:x});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("button",{onClick:t,children:"Logout"})},k=function(){return Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/",exact:!0,activeClassName:"active",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/login",exact:!0,activeClassName:"active",children:"Login"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/sign-up",exact:!0,activeClassName:"active",children:"Sign Up"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/users",exact:!0,activeClassName:"active",children:"Users"})}),Object(m.jsx)("li",{children:Object(m.jsx)(y,{})})]})})},S=n(21),C=function(e){var t=Object(u.c)((function(e){return e.session.user}));return Object(m.jsx)(p.b,Object(S.a)(Object(S.a)({},e),{},{children:t?e.children:Object(m.jsx)(p.a,{to:"/login"})}))};var E=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n.users);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var a=n.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/users/".concat(e.id),children:e.username})},e.id)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"User List: "}),Object(m.jsx)("ul",{children:a})]})};var P=function(){var e=Object(r.useState)({}),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(p.g)().userId;return Object(r.useEffect)((function(){a&&Object(o.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(a));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})))()}),[a]),n?Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("strong",{children:"User Id"})," ",a]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("strong",{children:"Username"})," ",n.username]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("strong",{children:"Email"})," ",n.email]})]}):null};var U,N=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(u.b)();return Object(r.useEffect)((function(){Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(function(){var e=Object(o.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/auth/",{headers:{"Content-Type":"application/json"}});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:if(!(r=e.sent).errors){e.next=9;break}return e.abrupt("return");case 9:t(d(r));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:c(!0);case 3:case"end":return e.stop()}}),e)})))()}),[a]),n?Object(m.jsxs)(l.a,{children:[Object(m.jsx)(k,{}),Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/login",exact:!0,children:Object(m.jsx)(g,{})}),Object(m.jsx)(p.b,{path:"/sign-up",exact:!0,children:Object(m.jsx)(w,{})}),Object(m.jsx)(C,{path:"/users",exact:!0,children:Object(m.jsx)(E,{})}),Object(m.jsx)(C,{path:"/users/:userId",exact:!0,children:Object(m.jsx)(P,{})}),Object(m.jsx)(C,{path:"/",exact:!0,children:Object(m.jsx)("h1",{children:"My Home Page"})})]})]}):null},T=n(16),I=n(23),J=Object(T.b)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{user:t.payload};case x:return{user:null};default:return e}}});U=Object(T.a)(I.a);var L=function(e){return Object(T.c)(J,e,U)}();s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(u.a,{store:L,children:Object(m.jsx)(N,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e4a30cb4.chunk.js.map